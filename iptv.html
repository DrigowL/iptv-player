<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IPTV Player</title>
  <style>
    .loginForm { text-align: center; padding: 20px; }
    .input-group { margin: 10px; }
    #channelList { display: flex; flex-wrap: wrap; }
    .channel { cursor: pointer; padding: 10px; margin: 5px; background: #f0f0f0; }
  </style>
</head>
<body>
  <div class="loginForm">
    <h1>Enter Your Login Details</h1>
    <div class="input-group">
      <input type="text" id="input-username" placeholder="Username" value="871405857" required>
    </div>
    <div class="input-group">
      <input type="password" id="input-password" placeholder="Password" value="B424q9257V" required>
    </div>
    <button onclick="login()">Login</button>
  </div>
  <div id="channelList" style="display: none;"></div>

  <script>
    function login() {
      const username = document.getElementById('input-username').value;
      const password = document.getElementById('input-password').value;
      const loginUrl = 'http://navegadoruniplay.top/index.php?adduser';

      fetch(loginUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/91.0.4472.124'
        },
        body: `username=${encodeURIComponent(username)}&password=${encodeURIComponent(password)}`
      })
      .then(response => {
        if (!response.ok) throw new Error('Erro de autenticação: ' + response.status);
        return response.text();
      })
      .then(data => {
        console.log('Resposta do login:', data);
        loadContent('http://navegadoruniplay.top/movies.php');
      })
      .catch(error => console.error('Erro:', error));
    }

    function loadContent(url) {
      fetch(url)
        .then(response => {
          if (!response.ok) throw new Error('Erro ao carregar conteúdo: ' + response.status);
          return response.text();
        })
        .then(html => {
          document.querySelector('.loginForm').style.display = 'none';
          document.getElementById('channelList').style.display = 'block';
          document.getElementById('channelList').innerHTML = html;
          extractChannels();
        })
        .catch(error => console.error('Erro:', error));
    }

    function extractChannels() {
      const channelList = document.getElementById('channelList');
      const posters = channelList.querySelectorAll('.streamselector');
      posters.forEach(poster => {
        const name = poster.querySelector('.hoverOver').textContent;
        const img = poster.querySelector('img').src;
        const div = document.createElement('div');
        div.className = 'channel';
        div.innerHTML = `<img src="${img}" width="100"><br>${name}`;
        div.onclick = () => console.log('Clicou em:', name); // Substitua por lógica de reprodução
        channelList.appendChild(div);
      });
    }
  </script>
</body>
</html>
